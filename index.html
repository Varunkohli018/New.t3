<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF Toolkit ‚Äî Premium</title>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

  <style>
    :root{
      --bg-start: #f6f8ff;
      --bg-end: #eef6ff;
      --glass: rgba(255,255,255,0.6);
      --accent-1: #2b6ef6;   /* blue */
      --accent-2: #7b61ff;   /* purple */
      --muted: #64748b;
      --text: #0f172a;
      --card-shadow: 0 10px 30px rgba(16,24,40,0.08);
      --btn-shadow: 0 12px 30px rgba(37,99,235,0.12);
      --btn-press-shadow: 0 4px 14px rgba(2,6,23,0.12);
      --radius: 14px;
      --glass-border: rgba(255,255,255,0.6);
      --glass-border-2: rgba(255,255,255,0.3);
    }

    /* Base layout */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg,var(--bg-start),var(--bg-end));
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }

    /* Header */
    .top-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:14px 18px;
      background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:white;
      box-shadow: 0 6px 22px rgba(43,110,246,0.12);
      position:sticky;
      top:0;
      z-index:40;
      border-bottom-left-radius:12px;
      border-bottom-right-radius:12px;
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:44px;height:44px;border-radius:10px;
      background:linear-gradient(135deg,rgba(255,255,255,0.15),rgba(255,255,255,0.06));
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:white;box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }
    .title {font-size:1.15rem;font-weight:600;letter-spacing:0.2px}
    .subtitle {font-size:0.8rem;opacity:0.92}

    /* Main container */
    .container{
      max-width:1100px;
      margin:26px auto;
      padding:0 18px 120px;
    }

    /* Grid of tools */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(160px,1fr));
      gap:18px;
    }

    /* 3D Glass Button (tool card) */
    .tool {
      position:relative;
      background: linear-gradient(180deg, rgba(255,255,255,0.82), rgba(249,250,255,0.7));
      border-radius: var(--radius);
      padding:22px 16px;
      text-align:center;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--glass-border-2);
      cursor:pointer;
      transition: transform 240ms cubic-bezier(.2,.9,.3,1), box-shadow 240ms;
      overflow:hidden;
      min-height:120px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:12px;
    }
    .tool:hover{
      transform: translateY(-6px);
      box-shadow: var(--btn-shadow);
    }
    .tool:active{
      transform: translateY(-2px) scale(0.995);
      box-shadow: var(--btn-press-shadow);
    }

    /* icon bubble */
    .icon {
      width:62px;height:62px;border-radius:14px;
      display:inline-grid;place-items:center;
      font-size:26px;color:white;font-weight:700;
      background: linear-gradient(135deg,var(--accent-1),var(--accent-2));
      box-shadow: 0 8px 20px rgba(59,130,246,0.18);
      margin:0 auto;
      position:relative;
      overflow:hidden;
    }
    /* glossy shine */
    .icon::after{
      content:"";
      position:absolute;left:-20%;top:-30%;width:60%;height:60%;
      transform:rotate(22deg);background:rgba(255,255,255,0.25);
      filter:blur(10px);opacity:0.9;
    }

    .tool h3{
      margin:0;font-size:1rem;color:var(--text);font-weight:700;
    }
    .tool p{
      margin:0;font-size:0.86rem;color:var(--muted);
    }

    /* Action button inside section (rounded gradient button) */
    .action {
      display:inline-block;
      background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:white;
      border:none;padding:12px 28px;border-radius:999px;
      font-weight:700;cursor:pointer;
      box-shadow: 0 12px 30px rgba(43,110,246,0.18);
      transition: transform 160ms ease, box-shadow 160ms;
    }
    .action:active{ transform: translateY(2px) scale(.995); box-shadow: 0 6px 16px rgba(2,6,23,0.12); }

    /* Pages/sections */
    section { display:none; text-align:center; padding:22px 8px 40px; }
    .page-active { display:block; animation: fadeIn 260ms ease; }

    @keyframes fadeIn { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }

    /* file list */
    ul#fileList{ list-style:none;padding:0;margin:14px auto;max-width:520px }
    ul#fileList li{
      display:flex;gap:8px;align-items:center;justify-content:space-between;
      padding:10px 12px;border-radius:10px;margin-bottom:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(248,250,255,0.85));
      border:1px solid var(--glass-border-2);
      box-shadow: var(--card-shadow);
      font-weight:600;color:var(--text);
    }
    ul#fileList .controls{display:flex;gap:8px}
    ul#fileList button{ border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700 }
    .openBtn{ background:linear-gradient(90deg,#10b981,#06b6d4); color:white }
    .shareBtn{ background:linear-gradient(90deg,#f59e0b,#f97316); color:white }
    .delBtn{ background:transparent;color:var(--muted); border:1px solid rgba(0,0,0,0.06) }

    /* small screens */
    @media (max-width:460px){
      .top-bar{padding:12px}
      .tool{padding:18px}
      .icon{width:54px;height:54px}
    }
  </style>
</head>
<body>
  <header class="top-bar">
    <div class="brand">
      <div class="logo">PDF</div>
      <div>
        <div class="title">PDF Toolkit</div>
        <div class="subtitle" style="opacity:.9;font-size:0.8rem">Create ¬∑ Merge ¬∑ Edit ¬∑ Share</div>
      </div>
    </div>

    <div style="display:flex;gap:10px;align-items:center">
      <button onclick="privacyPolicy()" class="action" style="padding:8px 14px;font-weight:700;background:rgba(255,255,255,0.12);box-shadow:none;border:1px solid rgba(255,255,255,0.12)">Privacy</button>
      <div style="width:10px"></div>
    </div>
  </header>

  <main class="container">
    <!-- HOME GRID -->
    <div id="homePage" class="page-active">
      <div style="margin-bottom:14px;text-align:center">
        <h2 style="margin:6px 0 2px;color:var(--accent-1)">Welcome to PDF Toolkit</h2>
        <div style="color:var(--muted);font-weight:600">Fast ¬∑ Offline ¬∑ Safe ‚Äî Files stored only on your device</div>
      </div>

      <div class="grid" aria-label="tools">
        <div class="tool" onclick="navigate('textToPdfPage')">
          <div class="icon">T</div>
          <h3>Text to PDF</h3>
          <p>Write & export clean PDFs</p>
        </div>

        <div class="tool" onclick="navigate('imageToPdfPage')">
          <div class="icon">üñºÔ∏è</div>
          <h3>Image to PDF</h3>
          <p>Convert photos to single PDF</p>
        </div>

        <div class="tool" onclick="navigate('mergePdfPage')">
          <div class="icon">üìé</div>
          <h3>Merge PDF</h3>
          <p>Combine multiple PDFs</p>
        </div>

        <div class="tool" onclick="navigate('editPdfPage')">
          <div class="icon">‚úèÔ∏è</div>
          <h3>Edit PDF</h3>
          <p>Add quick text edits</p>
        </div>

        <div class="tool" onclick="navigate('myFilesPage')">
          <div class="icon">üìÇ</div>
          <h3>My Files</h3>
          <p>Open, share or delete</p>
        </div>

        <div class="tool" onclick="navigate('receiptMakerPage')">
          <div class="icon">üßæ</div>
          <h3>Receipt Maker</h3>
          <p>Create structured receipts</p>
        </div>
      </div>
    </div>

    <!-- Text to PDF -->
    <section id="textToPdfPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">üìù Text to PDF</h3>
      <textarea id="pdfText" placeholder="Write here..." style="width:100%;max-width:760px;height:160px;border-radius:12px;padding:14px;border:1px solid rgba(0,0,0,0.06);font-size:1rem"></textarea>
      <div style="margin-top:14px">
        <button class="action" onclick="createTextPdf()">Create PDF</button>
      </div>
    </section>

    <!-- Image to PDF -->
    <section id="imageToPdfPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">üñºÔ∏è Image to PDF</h3>
      <div style="margin:14px 0">
        <button class="action" onclick="document.getElementById('imageInput').click()">Choose Images</button>
        <input id="imageInput" type="file" accept="image/*" multiple style="display:none"/>
      </div>
      <div style="margin-top:6px"><button class="action" onclick="createImagePdf()">Create PDF</button></div>
    </section>

    <!-- Merge -->
    <section id="mergePdfPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">üìé Merge PDFs</h3>
      <input id="mergeInput" type="file" accept="application/pdf" multiple style="margin:12px 0"/>
      <div><button class="action" onclick="mergeFiles()">Merge and Save</button></div>
    </section>

    <!-- Edit -->
    <section id="editPdfPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">‚úèÔ∏è Edit PDF</h3>
      <input id="editPdfInput" type="file" accept="application/pdf" style="margin:12px 0"/>
      <textarea id="editText" placeholder="Write text to place on first page..." style="width:100%;max-width:760px;height:120px;border-radius:12px;padding:12px;border:1px solid rgba(0,0,0,0.06)"></textarea>
      <div style="margin-top:12px"><button class="action" onclick="editPdf()">Apply Edit</button></div>
    </section>

    <!-- My Files -->
    <section id="myFilesPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">üìÇ My Files</h3>
      <ul id="fileList"></ul>
    </section>

    <!-- Receipt -->
    <section id="receiptMakerPage" class="">
      <h3 style="color:var(--accent-1);margin-top:6px">üßæ Receipt Maker</h3>
      <form id="receiptForm" style="display:flex;flex-direction:column;gap:10px;align-items:center;margin-top:12px">
        <input id="r_date" placeholder="Date" required style="max-width:420px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)"/>
        <input id="r_name" placeholder="Customer Name" required style="max-width:420px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)"/>
        <input id="r_item" placeholder="Item Description" required style="max-width:420px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)"/>
        <input id="r_qty" type="number" placeholder="Quantity" required style="max-width:420px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)"/>
        <input id="r_price" type="number" placeholder="Price per item" required style="max-width:420px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)"/>
        <div style="margin-top:8px"><button type="button" class="action" onclick="createReceiptPdf()">Create Receipt</button></div>
      </form>
    </section>
  </main>

  <!-- Fixed bottom nav -->
  <div style="position:fixed;left:0;right:0;bottom:14px;display:flex;justify-content:center;pointer-events:none">
    <div style="display:flex;gap:12px;pointer-events:auto">
      <button class="action" style="background:linear-gradient(90deg,#10b981,#06b6d4)" onclick="navigate('myFilesPage')">Open Files</button>
      <button class="action" style="background:linear-gradient(90deg,#3b82f6,#7b61ff)" onclick="goHome()">Home</button>
    </div>
  </div>

  <script>
    /* Navigation helpers */
    function goHome(){
      hideAllPages();
      document.getElementById('homePage').classList.add('page-active');
    }
    function navigate(pageId){
      hideAllPages();
      const id = pageId;
      const el = document.getElementById(id);
      if(el) el.classList.add('page-active');
      window.scrollTo({top:0,behavior:'smooth'});
    }
    function hideAllPages(){
      document.querySelectorAll('section, #homePage').forEach(e=>{
        e.classList.remove('page-active');
      });
    }

    // --- PDF logic preserved / adapted from your original code ---
    function createTextPdf() {
      const text = document.getElementById("pdfText").value || "";
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      // simple fallback for long text lines
      const lines = doc.splitTextToSize(text || " ", 180);
      doc.text(lines, 10, 10);
      doc.save("text.pdf");
      saveFile("text.pdf", doc.output("blob"));
      alert("Saved: text.pdf");
    }

    function createImagePdf() {
      const input = document.getElementById("imageInput");
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const files = input.files;
      if (!files || !files.length) return alert("Select image(s) first");
      const reader = new FileReader();
      let i = 0;

      function loadImageAndAdd() {
        if (i >= files.length) {
          doc.save("images.pdf");
          saveFile("images.pdf", doc.output("blob"));
          alert("Saved: images.pdf");
          return;
        }
        const file = files[i++];
        reader.onload = function (e) {
          const img = new Image();
          img.onload = () => {
            // keep aspect ratio and fit into page
            const maxW = 180, maxH = 240;
            let w = img.width, h = img.height;
            const ratio = Math.min(maxW/w, maxH/h);
            w = w * ratio; h = h * ratio;
            doc.addImage(img, "JPEG", (210-w)/2, 10, w, h);
            if (i < files.length) doc.addPage();
            loadImageAndAdd();
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
      loadImageAndAdd();
    }

    async function mergeFiles() {
      const input = document.getElementById("mergeInput");
      if (!input.files.length) return alert("Select PDF files first");
      const mergedPdf = await PDFLib.PDFDocument.create();

      for (let file of input.files) {
        const bytes = await file.arrayBuffer();
        const pdf = await PDFLib.PDFDocument.load(bytes);
        const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
        copiedPages.forEach(p => mergedPdf.addPage(p));
      }

      const mergedBytes = await mergedPdf.save();
      const blob = new Blob([mergedBytes], { type: "application/pdf" });
      const name = "merged.pdf";
      saveFile(name, blob);
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = name;
      link.click();
      alert("Saved: merged.pdf");
    }

    async function editPdf() {
      const fileInput = document.getElementById("editPdfInput");
      const text = document.getElementById("editText").value || "";
      if (!fileInput.files.length) return alert("Upload a PDF first");

      const bytes = await fileInput.files[0].arrayBuffer();
      const pdfDoc = await PDFLib.PDFDocument.load(bytes);
      const page = pdfDoc.getPage(0);
      // draw text at a reasonable default position
      page.drawText(text, { x: 50, y: page.getHeight() - 80, size: 16 });
      const newPdf = await pdfDoc.save();
      const blob = new Blob([newPdf], { type: "application/pdf" });
      saveFile("edited.pdf", blob);
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "edited.pdf";
      link.click();
      alert("Saved: edited.pdf");
    }

    function createReceiptPdf() {
      const name = document.getElementById("r_name").value || "";
      const item = document.getElementById("r_item").value || "";
      const qty = Number(document.getElementById("r_qty").value || 0);
      const price = Number(document.getElementById("r_price").value || 0);
      const date = document.getElementById("r_date").value || new Date().toLocaleDateString();

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(12);
      doc.text(`Date: ${date}`, 10, 12);
      doc.text(`Name: ${name}`, 10, 24);
      doc.text(`Item: ${item}`, 10, 36);
      doc.text(`Qty: ${qty}`, 10, 48);
      doc.text(`Price: ‚Çπ${price}`, 10, 60);
      doc.text(`Total: ‚Çπ${qty * price}`, 10, 72);
      doc.save("receipt.pdf");
      saveFile("receipt.pdf", doc.output("blob"));
      alert("Saved: receipt.pdf");
    }

    function saveFile(filename, blob) {
      try {
        const reader = new FileReader();
        reader.onload = function () {
          localStorage.setItem(filename, reader.result);
          loadMyFiles();
        };
        reader.readAsDataURL(blob);
      } catch (e) {
        console.error("saveFile error", e);
      }
    }

    function loadMyFiles() {
      const fileList = document.getElementById("fileList");
      if (!fileList) return;
      fileList.innerHTML = "";
      Object.keys(localStorage).forEach(key => {
        if (key.endsWith(".pdf")) {
          const li = document.createElement("li");
          li.textContent = key;
          const controls = document.createElement("div");
          controls.className = "controls";

          const open = document.createElement("button");
          open.textContent = "Open";
          open.className = "openBtn";
          open.onclick = () => window.open(localStorage.getItem(key));

          const share = document.createElement("button");
          share.textContent = "Share";
          share.className = "shareBtn";
          share.onclick = () => navigator.share?.({ title: key, url: localStorage.getItem(key) }) || alert("Share not supported on this browser");

          const del = document.createElement("button");
          del.textContent = "Delete";
          del.className = "delBtn";
          del.onclick = () => { if(confirm('Delete ' + key + '?')){ localStorage.removeItem(key); loadMyFiles(); } };

          controls.append(open, share, del);
          li.appendChild(controls);
          fileList.appendChild(li);
        }
      });
    }

    function privacyPolicy() {
      alert("This app works offline and stores files only on your device.");
    }
    function leaveFeedback() { alert("Thanks for your feedback!"); }

    // initialize
    window.addEventListener('load', () => {
      loadMyFiles();
      goHome();
    });
  </script>
</body>
</html>
